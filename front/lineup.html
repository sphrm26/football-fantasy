<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="lineup.css">
    <title>line up</title>
</head>

<body style="background-color: rgb(255, 255, 255);">
    <nav>
        <ul class="grad1" style="font-size: x-large;">
            <li onclick="window.location.href='mainPage.html'" style="font-weight: 900;"><a href="#">home</a></li>
            <li><a href="#">line up</a></li>
            <li><a href="#">states</a></li>
            <li onclick="window.location.href='teams.html'"><a href="#">teams</a></li>
        </ul>
        <img style="width: 3.8%;position: absolute;top: 2%;right: 0.5%;" src="images/IMG_20230712_141806.jpg"
            alt="power shell 404">
        <img onclick="window.window.open('http://www.premierleague.com/en-gb.html')"
            style=" width: 6%;position: absolute;top: 10%;right: 5%;" src="images/Premier_League_Logo.svg.png"
            alt="power shell 404">
    </nav>
    <div onclick="search()" class="searchdiv" style="position: relative;top: 9%;left: 53%;">
        <form>
            <label style="position: absolute;right: 65%;top: 2%;" class="label" for="name">name</label>
            <input style="position: relative;left: 35%;" class="input" type="text" name="name" id="name"><br>

            <label class="label" for="team">team</label>
            <select style="width: 23.75%;;" class="input" name="team" id="team">
                <option value=21>All</option>
                <option value=1>Arsenal</option>
                <option value=2>Aston Villa</option>
                <option value=3>Bournemouth</option>
                <option value=4>Brentford</option>
                <option value=5>Brighton</option>
                <option value=6>Burnley</option>
                <option value=7>Chelsea</option>
                <option value=8>Crystal Palace</option>
                <option value=9>Everton</option>
                <option value=10>Fulham</option>
                <option value=11>Liverpool</option>
                <option value=12>Luton</option>
                <option value=13>Man City</option>
                <option value=14>Man Utd</option>
                <option value=15>Newcastle</option>
                <option value=16>Nott'm Forest</option>
                <option value=17>Sheffield Utd</option>
                <option value=18>Spurs</option>
                <option value=19>West Ham</option>
                <option value=20>Wolves</option>
            </select>

            <label style="position: relative;left: 17%;" class="label" for="minCost">min cost</label>
            <input style="position: absolute;left: 67%;top: 21.4%;width: 32%;" class="input" type="number"
                name="minCost" id="minCost"><br>

            <label class="label" for="sortBy">sort by</label>
            <select style="width: 20%;" class="input" name="sortBy" id="sortBy">
                <option value=-1>none</option>
                <option value=1>by money</option>
                <option value=2>by point</option>
            </select>

            <label style="position: relative;left: 17%;" class="label" for="maxCost">max cost</label>
            <input style="position: absolute;left: 68%;top: 38.6%;width: 31%;" class="input" type="number"
                name="maxCost" id="maxCost"><br>

            <label class="label" for="arrange">arrange</label>
            <select style="width: 18.8%;" class="input" name="arrange" id="arrange">
                <option value=1>up to down</option>
                <option value=2>down to up</option>
            </select>

            <label style="position: relative;left: 17%;" class="label" for="minPoint">min point</label>
            <input style="position: absolute;left: 69%;top: 55.8%;width: 30%;" class="input" type="number"
                name="minPoint" id="minPoint"><br>

            <label class="label" for="position">position</label>
            <select style="width: 17.7%;" class="input" name="position" id="position">
                <option value=5>All</option>
                <option value=1>Goal Keeper</option>
                <option value=2>Defender</option>
                <option value=3>Midfielder</option>
                <option value=4>Forward</option>
            </select>

            <label style="position: relative;left: 17%;" class="label" for="maxPoint">max point</label>
            <input style="position: absolute;left: 69.5%;top: 73%;width: 29.5%;" class="input" type="number"
                name="maxPoint" id="maxPoint"><br>

        </form>
    </div>
    <div onclick="search()" class="table" id="table">

        <div style="border: 3px solid rgba(180, 60, 207, 20);width: 98%;height: auto;position: relative;left: 0.5%;margin-top: 0.5%;"
            id="table-container">
        </div>




        <div
            style="width: 40%;height:5%;position: relative;left: 30%;top: 200%;margin: 4%;border: 2px solid red;margin: 0%;">


            <button onclick="pageIndexHandle('pre')" style="position: relative;left: 30%;top: 20%;" id="pre">←</button>
            <div style="position: relative;left: 45%;top: -85%;width: 10%; text-align: center;">
                <p id="pageIndex">1</p>
            </div>
            <button onclick="pageIndexHandle('next')" style="position: relative;left: 60%;top: -194.25%;"
                id="pre">→</button>



        </div>
    </div>
    <div
        style="border: 3px solid rgba(180, 60, 207, 20); position: absolute; top: 10%; left: 1%;width: 50%;height: 114.8%;">
        <img class="picture" src="images/football-field-3201.jpg" alt="line up">

        <img style="z-index: 0;position: absolute;top: 15%; left: 32%;"
            src="https://fantasy.premierleague.com/dist/img/shirts/standard/shirt_0_1-66.webp" alt="">

        <img style="z-index: 0;position: absolute;top: 15%; right: 32%;"
            src="https://fantasy.premierleague.com/dist/img/shirts/standard/shirt_0_1-66.webp" alt="">

        <img style="z-index: 0;position: absolute;top: 15%; right: 32%;"
            src="https://fantasy.premierleague.com/dist/img/shirts/standard/shirt_0_1-66.webp" alt="">

        <img style="z-index: 0;position: absolute;top: 15%; right: 32%;"
            src="https://fantasy.premierleague.com/dist/img/shirts/standard/shirt_0_1-66.webp" alt="">

        <img style="z-index: 0;position: absolute;top: 15%; right: 32%;"
            src="https://fantasy.premierleague.com/dist/img/shirts/standard/shirt_0_1-66.webp" alt="">

        <img style="z-index: 0;position: absolute;top: 15%; right: 32%;"
            src="https://fantasy.premierleague.com/dist/img/shirts/standard/shirt_0_1-66.webp" alt="">

        <img style="z-index: 0;position: absolute;top: 15%; right: 32%;"
            src="https://fantasy.premierleague.com/dist/img/shirts/standard/shirt_0_1-66.webp" alt="">

        <img style="z-index: 0;position: absolute;top: 15%; right: 32%;"
            src="https://fantasy.premierleague.com/dist/img/shirts/standard/shirt_0_1-66.webp" alt="">

        <img style="z-index: 0;position: absolute;top: 15%; right: 32%;"
            src="https://fantasy.premierleague.com/dist/img/shirts/standard/shirt_0_1-66.webp" alt="">

        <img style="z-index: 0;position: absolute;top: 15%; right: 32%;"
            src="https://fantasy.premierleague.com/dist/img/shirts/standard/shirt_0_1-66.webp" alt="">

        <img style="z-index: 0;position: absolute;top: 15%; right: 32%;"
            src="https://fantasy.premierleague.com/dist/img/shirts/standard/shirt_0_1-66.webp" alt="">

        <img style="z-index: 0;position: absolute;top: 15%; right: 32%;"
            src="https://fantasy.premierleague.com/dist/img/shirts/standard/shirt_0_1-66.webp" alt="">

        <img style="z-index: 0;position: absolute;top: 15%; right: 32%;"
            src="https://fantasy.premierleague.com/dist/img/shirts/standard/shirt_0_1-66.webp" alt="">

        <img style="z-index: 0;position: absolute;top: 15%; right: 32%;"
            src="https://fantasy.premierleague.com/dist/img/shirts/standard/shirt_0_1-66.webp" alt="">

        <img style="z-index: 0;position: absolute;top: 15%; right: 32%;"
            src="https://fantasy.premierleague.com/dist/img/shirts/standard/shirt_0_1-66.webp" alt="">
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        function pageIndexHandle(nextOrPre) {
            if (nextOrPre == "pre") {
                let number = parseInt(document.getElementById("pageIndex").innerHTML);
                if (number == 1) {
                    return;
                }
                document.getElementById("pageIndex").innerHTML = number - 1;
            }
            if (nextOrPre == "next") {
                let number = parseInt(document.getElementById("pageIndex").innerHTML);
                document.getElementById("pageIndex").innerHTML = number + 1;
            }
        }

        function search() {
            let url = "";
            url += "http://localhost:3001/search/?";

            url += "name=";
            url += document.getElementById("name").value;

            url += "&length=";
            url += "8";

            url += "&index=";
            url += document.getElementById("pageIndex").innerHTML;

            url += "&order=";
            url += document.getElementById("arrange").value;

            url += "&sortBy=";
            url += document.getElementById("sortBy").value;

            url += "&teamCode=";
            url += document.getElementById("team").value;

            url += "&position=";
            url += document.getElementById('position').value;

            url += "&minPrice=";
            if (document.getElementById("minCost").value == "") {
                url += -1;
            } else {
                // alert("a");
                url += document.getElementById("minCost").value;
            }

            url += "&maxPrice=";
            if (document.getElementById("maxCost").value == "") {
                url += -1;
            } else {
                // alert("b");
                url += document.getElementById("maxCost").value;
            }

            url += "&minScore=";
            if (document.getElementById("minPoint").value == "") {
                url += -1;
            } else {
                // alert("c");
                url += document.getElementById("minPoint").value;
            }

            url += "&maxScore=";
            if (document.getElementById("maxPoint").value == "") {
                url += -1;
            } else {
                // alert("d");
                url += document.getElementById("maxPoint").value;
            }


            $.get(url, function (data) {
                var table = "<table><tr><th>image</th><th>first name</th><th>last name</th><th>price</th><th>total Point</th><th>position</th><th>team</th></tr>";
                let counter = 0;
                $.each(data, function (index, value) {
                    table += "<tr><td style='width: 20%'>" + "<div><img class='PlayerPhoto' src='https://resources.premierleague.com/premierleague/photos/players/250x250/p" + value.code + ".png'></div>" + "</td><td>" + value.first_name + "</td><td>" + value.second_name + "</td><td>" + value.now_cost + "</td><td>" + value.total_points + "</td><td>";
                    if (value.element_type == "1") {
                        table += "GK";
                    }
                    if (value.element_type == "2") {
                        table += "DEF";
                    }
                    if (value.element_type == "3") {
                        table += "MID";
                    }
                    if (value.element_type == "4") {
                        table += "FRW";
                    }
                    table += "</td><td>" + "<div><img class='PlayerPhoto' src='https://resources.premierleague.com/premierleague/badges/rb/t" + value.team_code + ".svg'></div>" + "</td></tr>";
                    counter++;
                });
                if (counter == 0) {
                    if (document.getElementById("pageIndex").innerHTML > 1) {
                        document.getElementById("pageIndex").innerHTML -= 1;
                        search();
                        return;
                    }
                    else {
                        return;
                    }
                }
                table += "</table>";
                $("#table-container").html(table);
            });
        }
    </script>
</body>

</html>